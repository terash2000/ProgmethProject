package application;

import character.Hero;

import javafx.animation.AnimationTimer;
import javafx.event.EventHandler;
import javafx.scene.input.KeyEvent;
import javafx.stage.Stage;

public class Controller {
	
	private static AnimationTimer timer;
	private static boolean left, right, down, jump, dash, turnLeft;
	private static int direction;
	private static Stage cerrentStage;
	
	public static void addTimer(Hero hero) {
		timer = new AnimationTimer() {
			@Override
			public void handle(long now) {
				if(cerrentStage.isFullScreen()) {
					Main.setSceneHeight(Main.getFullsceneheight());
					Main.setSceneWidth(Main.getFullscenewidth());
				}else {
					Main.setSceneHeight(cerrentStage.getHeight() - 30);
					Main.setSceneWidth(cerrentStage.getWidth());
				}
				
				hero.turn(turnLeft);
				direction = 0;
				if (left) {
					direction += -1;
				}
				if (right) {
					direction += 1;
				}
				hero.walking(direction);
				if (down) {
					hero.dive();
				}else {
					hero.setFallSpeedLimit(true);
				}
				if (jump) {
					hero.jumping();
				}else {
					hero.stopJump();
				}
				if (dash) {
					hero.dash();
				}
				hero.move();
			}
		};
		timer.start();
	}
	
	public static void setKey(Stage stage) {
		cerrentStage = stage;
		stage.getScene().setOnKeyPressed(new EventHandler<KeyEvent>() {
			@Override 
			public void handle(KeyEvent event) {
				switch (event.getCode()) {
				case A:  
					left = true;
					turnLeft = true;
					break;
				case D: 
					right = true;
					turnLeft = false;
					break;
				case S:  
					down = true;
					break;
				case SPACE:    
					jump = true;
					break;
				case SHIFT:
					dash = true;
					break;
				default:	   
					break;
				}
			}
		});
		stage.getScene().setOnKeyReleased(new EventHandler<KeyEvent>() {
		    @Override 
			public void handle(KeyEvent event) {
				switch (event.getCode()) {
				case A:  
					left = false; 
					break;
				case D: 
					right = false; 
					break;
				case S:  
					down = false; 
					break;
				case SPACE:    
					jump = false;
					break;
				case SHIFT:
					dash = false;
					break;
				default:	   
					break;
				}
			}
		});
	}

}
